{"ast":null,"code":"var _jsxFileName = \"/home/binhcao/Desktop/task-management/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport TaskForm from './components/TaskForm';\nimport TaskControl from './components/TaskControl';\nimport TaskList from './components/TaskList';\nimport { findIndex } from 'lodash';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onGenerateData = () => {\n      var tasks = [{\n        id: this.generateId(),\n        name: 'Learn programming',\n        status: true\n      }, {\n        id: this.generateId(),\n        name: 'Go swimming',\n        status: false\n      }, {\n        id: this.generateId(),\n        name: 'Go to bed',\n        status: true\n      }];\n      this.setState({\n        tasks\n      });\n      localStorage.setItem('tasks', JSON.stringify(tasks));\n    };\n\n    this.onToggleForm = () => {\n      if (this.state.isDisplayForm && this.state.taskEditing !== null) {\n        this.setState({\n          //TaskForm: modify --> add\n          isDisplayForm: true,\n          taskEditing: null\n        });\n      } else {\n        this.setState({\n          isDisplayForm: !this.state.isDisplayForm,\n          taskEditing: null\n        });\n      }\n    };\n\n    this.onCloseForm = () => {\n      this.setState({\n        isDisplayForm: false\n      });\n    };\n\n    this.onShowForm = () => {\n      this.setState({\n        isDisplayForm: true\n      });\n    };\n\n    this.onSubmit = data => {\n      // console.log(typeof data.status);\n      // console.log(typeof \"true\");\n      var tasks = this.state.tasks;\n\n      if (data.id === '') {\n        data.id = this.generateId();\n        tasks.push(data);\n      } else {\n        var index = this.findIndex(data.id);\n        tasks[index] = data;\n      }\n\n      this.setState({\n        tasks,\n        taskEditing: null\n      });\n      localStorage.setItem('tasks', JSON.stringify(tasks));\n    };\n\n    this.onUpdateStatus = id => {\n      var tasks = this.state.tasks;\n      var index = findIndex(tasks, task => {\n        return task.id === id;\n      });\n\n      if (index > -1) {\n        tasks[index].status = !tasks[index].status;\n        this.setState({\n          tasks\n        });\n        localStorage.setItem('tasks', JSON.stringify(tasks));\n      }\n    };\n\n    this.findIndex = id => {\n      var tasks = this.state.tasks;\n      var result = -1;\n      tasks.forEach((task, index) => {\n        if (task.id === id) result = index;\n      });\n      return result;\n    };\n\n    this.onDelete = id => {\n      var tasks = this.state.tasks;\n      var index = this.findIndex(id);\n\n      if (index > -1) {\n        tasks.splice(index, 1);\n        this.setState({\n          tasks\n        });\n        localStorage.setItem('tasks', JSON.stringify(tasks));\n      }\n\n      this.onCloseForm();\n    };\n\n    this.onUpdate = id => {\n      var tasks = this.state.tasks;\n      var index = this.findIndex(id);\n      var taskEditing = tasks[index];\n      this.setState({\n        taskEditing\n      });\n      this.onShowForm();\n    };\n\n    this.onFilter = (filterName, filterStatus) => {\n      filterStatus = parseInt(filterStatus, 10);\n      this.setState({\n        filterName: filterName.toLowerCase(),\n        filterStatus\n      });\n    };\n\n    this.onSearch = keyword => {\n      this.setState({\n        keyword\n      });\n    };\n\n    this.onSort = (sortBy, sortValue) => {\n      this.setState({\n        // Nhận từ state component dưới rồi chuyền props trở lại\n        sortBy,\n        sortValue\n      });\n    };\n\n    var _tasks = [];\n    this.state = {\n      tasks: _tasks,\n      isDisplayForm: false,\n      taskEditing: null,\n      //Based on taskEditing to know TaskForm is add or modify\n      filterName: '',\n      filterStatus: -1,\n      keyword: '',\n      sortBy: 'name',\n      // shouldn't object type\n      sortValue: 1\n    };\n  }\n\n  s4() {\n    return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n  }\n\n  generateId() {\n    return this.s4() + this.s4() + '-' + this.s4() + '-' + this.s4() + '-' + this.s4() + '-' + this.s4() + this.s4() + this.s4();\n  }\n\n  render() {\n    var _this$state = this.state,\n        tasks = _this$state.tasks,\n        isDisplayForm = _this$state.isDisplayForm,\n        taskEditing = _this$state.taskEditing,\n        filterName = _this$state.filterName,\n        filterStatus = _this$state.filterStatus,\n        keyword = _this$state.keyword,\n        sortBy = _this$state.sortBy,\n        sortValue = _this$state.sortValue;\n\n    if (filterName) {\n      // !== null !== 0 !== undefined\n      tasks = tasks.filter(task => {\n        return task.name.toLowerCase().indexOf(filterName) !== -1;\n      });\n    }\n\n    tasks = tasks.filter(task => {\n      if (filterStatus === -1) return task;else return task.status === (filterStatus === 1 ? true : false);\n    });\n\n    if (keyword) {\n      tasks = tasks.filter(task => {\n        return task.name.toLowerCase().indexOf(keyword.toLowerCase()) !== -1;\n      });\n    }\n\n    if (sortBy === 'name') {\n      tasks.sort((a, b) => {\n        if (a.name > b.name) return sortValue;else if (a.name < b.name) return -sortValue;else return 0;\n      });\n    } else {\n      tasks.sort((a, b) => {\n        if (a.status > b.status) return -sortValue;else if (a.status < b.status) return sortValue;else return 0;\n      });\n    }\n\n    var elmTaskForm = isDisplayForm ? React.createElement(TaskForm, {\n      onSubmit: this.onSubmit,\n      onCloseForm: this.onCloseForm,\n      task: taskEditing,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }) : '';\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, \"Task Management\"), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: isDisplayForm ? 'col-xs-4 col-sm-4 col-md-4 col-lg-4' : 'col-xs-0 col-sm-0 col-md-0 col-lg-0',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, elmTaskForm), React.createElement(\"div\", {\n      className: isDisplayForm ? 'col-xs-8 col-sm-8 col-md-8 col-lg-8' : 'col-xs-12 col-sm-12 col-md-12 col-lg-12',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary\",\n      onClick: this.onToggleForm,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"fa fa-plus mr-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }), \"Add your task\"), React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-danger ml-5\",\n      onClick: this.onGenerateData,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, \"Generate sample data\"), React.createElement(TaskControl, {\n      onSearch: this.onSearch,\n      onSort: this.onSort,\n      sortBy: sortBy,\n      sortValue: sortValue,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row mt-15\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-xs-12 col-sm-12 col-md-12 col-lg-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, React.createElement(TaskList, {\n      onUpdateStatus: this.onUpdateStatus,\n      onDelete: this.onDelete,\n      onUpdate: this.onUpdate,\n      onFilter: this.onFilter,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }))))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/binhcao/Desktop/task-management/src/App.js"],"names":["React","Component","TaskForm","TaskControl","TaskList","findIndex","App","constructor","props","onGenerateData","tasks","id","generateId","name","status","setState","localStorage","setItem","JSON","stringify","onToggleForm","state","isDisplayForm","taskEditing","onCloseForm","onShowForm","onSubmit","data","push","index","onUpdateStatus","task","result","forEach","onDelete","splice","onUpdate","onFilter","filterName","filterStatus","parseInt","toLowerCase","onSearch","keyword","onSort","sortBy","sortValue","s4","Math","floor","random","toString","substring","render","filter","indexOf","sort","a","b","elmTaskForm"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport TaskForm from './components/TaskForm';\nimport TaskControl from './components/TaskControl';\nimport TaskList from './components/TaskList';\nimport {findIndex} from 'lodash';\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n    var tasks = [];\n    this.state = {\n      tasks,\n      isDisplayForm: false,\n      taskEditing: null,         //Based on taskEditing to know TaskForm is add or modify\n      filterName: '',\n      filterStatus: -1,\n      keyword: '',\n      sortBy: 'name',         // shouldn't object type\n      sortValue: 1\n    }\n  }\n\n  onGenerateData = () => {\n    var tasks = [\n      {\n        id: this.generateId(),\n        name: 'Learn programming',\n        status: true\n      },\n      {\n        id: this.generateId(),\n        name: 'Go swimming',\n        status: false\n      },\n      {\n        id: this.generateId(),\n        name: 'Go to bed',\n        status: true\n      }\n    ];\n    this.setState({\n      tasks\n    });\n    localStorage.setItem('tasks', JSON.stringify(tasks));\n  }\n\n  s4() {\n    return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n  }\n\n  generateId() {\n    return this.s4() + this.s4() + '-' + this.s4() + '-' + this.s4() + '-' + this.s4() + '-' + this.s4() + this.s4() + this.s4();\n  }\n\n  onToggleForm = () => {\n    if (this.state.isDisplayForm && this.state.taskEditing !== null) {\n      this.setState({             //TaskForm: modify --> add\n        isDisplayForm: true,\n        taskEditing: null\n      });\n    }else{\n      this.setState({             \n        isDisplayForm: !this.state.isDisplayForm,\n        taskEditing: null\n      });\n    }\n  }\n\n  onCloseForm = () => {\n    this.setState({\n      isDisplayForm: false\n    });\n  }\n\n  onShowForm = () => {\n    this.setState({\n      isDisplayForm: true\n    });\n  }\n\n  onSubmit = (data) => {\n    // console.log(typeof data.status);\n    // console.log(typeof \"true\");\n    var {tasks} = this.state;\n    if (data.id === '') {\n      data.id = this.generateId();\n      tasks.push(data);\n    } else {\n      var index = this.findIndex(data.id);\n      tasks[index] = data;\n    }    \n    this.setState({\n      tasks,\n      taskEditing: null\n    });\n    localStorage.setItem('tasks', JSON.stringify(tasks));\n  }\n\n  onUpdateStatus = (id) => {\n    var {tasks} = this.state;\n    var index = findIndex(tasks, task => {\n      return task.id === id;\n    });\n    if (index > -1) {\n      tasks[index].status = !tasks[index].status;\n      this.setState({\n        tasks\n      });\n      localStorage.setItem('tasks', JSON.stringify(tasks));\n    }\n  }\n\n  findIndex = (id) => {\n    var {tasks} = this.state;\n    var result = -1;\n    tasks.forEach((task, index) => {\n      if (task.id === id)\n        result = index;\n    });\n    return result;\n  }\n\n  onDelete = (id) => {\n    var {tasks} = this.state;\n    var index = this.findIndex(id);\n    if (index > -1) {\n      tasks.splice(index, 1);\n      this.setState({\n        tasks\n      });\n      localStorage.setItem('tasks', JSON.stringify(tasks));\n    }\n    this.onCloseForm();\n  }\n\n  onUpdate = (id) => {\n    var {tasks} = this.state;\n    var index = this.findIndex(id);\n    var taskEditing = tasks[index];\n    this.setState({\n      taskEditing\n    });\n    this.onShowForm();\n  }\n\n  onFilter = (filterName, filterStatus) => {\n    filterStatus = parseInt(filterStatus, 10);\n    this.setState({\n        filterName: filterName.toLowerCase(),\n        filterStatus\n    });\n  }\n\n  onSearch = (keyword) => {\n    this.setState({\n      keyword\n    });\n  }\n\n  onSort = (sortBy, sortValue) => {\n    this.setState({             // Nhận từ state component dưới rồi chuyền props trở lại\n        sortBy,\n        sortValue\n    })\n  }\n\n  render() {\n    var { tasks, isDisplayForm, taskEditing, filterName, filterStatus, keyword, sortBy, sortValue } = this.state;\n    if (filterName) {            // !== null !== 0 !== undefined\n      tasks = tasks.filter(task => {\n        return task.name.toLowerCase().indexOf(filterName) !== -1;\n      });\n    }        \n    tasks = tasks.filter(task => {\n      if (filterStatus === -1) return task;\n      else return task.status === (filterStatus === 1 ? true : false);\n    });\n    if (keyword) {            \n      tasks = tasks.filter(task => {\n        return task.name.toLowerCase().indexOf(keyword.toLowerCase()) !== -1;\n      });\n    }\n\n    if (sortBy === 'name') {\n      tasks.sort((a, b) => {\n        if (a.name > b.name) return sortValue;\n        else if (a.name < b.name) return -sortValue;\n        else return 0;\n      });\n    } else {\n      tasks.sort((a, b) => {\n        if (a.status > b.status) return -sortValue;\n        else if (a.status < b.status) return sortValue;\n        else return 0;\n      });\n    }\n\n    var elmTaskForm = isDisplayForm \n      ? <TaskForm \n          onSubmit={this.onSubmit} \n          onCloseForm={this.onCloseForm}\n          task={taskEditing}\n        /> \n      : '';\n    return (\n      <div className=\"container\">\n        <div className=\"text-center\">\n          <h1>Task Management</h1><hr />\n        </div>\n        <div className=\"row\">\n          <div className={isDisplayForm ? 'col-xs-4 col-sm-4 col-md-4 col-lg-4' : 'col-xs-0 col-sm-0 col-md-0 col-lg-0'}>\n            {elmTaskForm}\n          </div>\n          <div className={isDisplayForm ? 'col-xs-8 col-sm-8 col-md-8 col-lg-8' : 'col-xs-12 col-sm-12 col-md-12 col-lg-12'}>\n            <button type=\"button\" className=\"btn btn-primary\" onClick={this.onToggleForm}>\n              <span className=\"fa fa-plus mr-5\"></span>Add your task\n            </button>\n            <button type=\"button\" className=\"btn btn-danger ml-5\" onClick={this.onGenerateData}>\n              Generate sample data\n            </button>\n            <TaskControl \n                onSearch={this.onSearch} \n                onSort={this.onSort}\n                sortBy={sortBy}\n                sortValue={sortValue}\n            />\n            <div className=\"row mt-15\">\n              <div className=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n                <TaskList \n                  onUpdateStatus={this.onUpdateStatus}\n                  onDelete={this.onDelete}\n                  onUpdate={this.onUpdate}\n                  onFilter={this.onFilter}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\nexport default App;\n"]},"metadata":{},"sourceType":"module"}